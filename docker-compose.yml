services:
  pytr:
    build:
      context: .
      args:
        UID: "${UID:-1000}"
        GID: "${GID:-1000}"
    user: "${UID:-1000}:${GID:-1000}"
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
    restart: unless-stopped

  discovery:
    image: python:3.12-slim
    network_mode: host
    restart: unless-stopped
    volumes:
      - ./discovery.py:/discovery.py:ro
    command: ["python3", "-u", "/discovery.py"]
