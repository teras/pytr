<!-- Copyright (c) 2026 Panayotis Katsaloulis -->
<!-- SPDX-License-Identifier: AGPL-3.0-or-later -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PYTR</title>
    <link rel="icon" type="image/svg+xml" href="/static/pytr.svg">
    <link rel="stylesheet" href="/static/style.css">
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/vanilla-colorful/hex-color-picker.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dashjs@4/dist/dash.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1/dist/hls.min.js"></script>
</head>
<body>
    <!-- Profile selector overlay -->
    <div id="profile-overlay"></div>

    <div class="container">
        <header>
            <h1><a href="/" id="logo-link" style="color:inherit;text-decoration:none;display:flex;flex-direction:column;align-items:center;gap:0"><img src="/static/pytr.svg" alt="" style="height:2.2em;width:auto"><span style="font-size:0.45em;font-weight:600;color:#fff;letter-spacing:1px;margin-left:0.5em">PYTR</span></a></h1>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search videos..." autofocus>
                <button id="search-btn" title="Search">&#x1F50D;</button>
            </div>
            <button id="profile-switcher-btn" class="profile-switcher-btn hidden"></button>
        </header>

        <main>
            <!-- List View (Search / Channel) -->
            <div id="list-view">
                <div id="list-header" class="hidden">
                    <h2 id="list-title"></h2>
                    <div id="list-tabs" class="hidden">
                        <button class="list-tab active" data-tab="history">Watch History</button>
                        <button class="list-tab" data-tab="favorites">Favorites</button>
                        <button class="list-tab" data-tab="channels">Channels</button>
                    </div>
                    <span id="clear-list-btn" class="hidden">Clear history</span>
                </div>
                <div id="video-grid"></div>
                <div id="load-more-container" class="hidden"></div>
                <div id="no-results" class="hidden">
                    <p>No videos found.</p>
                </div>
            </div>

            <!-- Video Page View -->
            <div id="video-view" class="hidden">
                <div class="video-page-layout">
                    <!-- Left column: Player -->
                    <div class="video-main">
                        <div id="player-container">
                            <video id="video-player" autoplay></video>
                            <div id="tv-osd" class="tv-osd">
                                <span id="osd-play-icon" class="osd-play-icon">&#9654;</span>
                                <span id="osd-current" class="tv-osd-time">0:00</span>
                                <div id="osd-bar" class="tv-osd-bar">
                                    <div id="osd-progress" class="tv-osd-progress"></div>
                                </div>
                                <span id="osd-total" class="tv-osd-time">0:00</span>
                                <div class="osd-right-controls">
                                    <div class="osd-volume-wrap">
                                        <button id="osd-volume-btn" class="osd-ctrl-btn" title="Volume">
                                            <svg id="osd-vol-icon" viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#ddd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                                        </button>
                                        <div id="osd-volume-popup" class="osd-volume-popup">
                                            <input id="osd-volume-slider" type="range" min="0" max="100" value="100" orient="vertical">
                                        </div>
                                    </div>
                                    <div class="osd-expand-wrap">
                                        <button id="osd-expand-btn" class="osd-ctrl-btn" title="Expand">
                                            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#ddd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg>
                                        </button>
                                        <div id="osd-expand-popup" class="osd-expand-popup">
                                            <button class="osd-expand-option" data-action="normal"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><g transform="translate(-.315 1.56)"><path d="M2.5 3.254c-.158 0-.246.088-.246.246v6c0 .158.088.246.246.246h11c.158 0 .246-.088.246-.246v-6c0-.158-.088-.246-.246-.246z" transform="matrix(1.10769 0 0 1.36354 -.676 -2.038)"/><path d="M1.74 18.505h6.98"/><path d="M1.857 15.427h11.987" style="stroke-width:1.73306"/><rect width="6" height="4" x="16.89" y="2" rx="1"/><rect width="6" height="4" x="16.89" y="8.44" rx="1"/><rect width="6" height="4" x="16.89" y="14.88" rx="1"/></g></svg>Normal</button>
                                            <button class="osd-expand-option" data-action="theater"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" stroke="none"><path d="M0 21.03v-1.028l.06-.091c.11-.17.307-.3.505-.332.18-.028 2.233-.027 2.373.002a.83.83 0 0 1 .629.679c.014.082.019.395.015.955l-.006.833-1.788.005L0 22.058zm3.996 1a24 24 0 0 1-.004-.92l.005-.893.07-.155a.9.9 0 0 1 .358-.41c.154-.086.263-.093 1.422-.093 1.169 0 1.227.004 1.4.103a.9.9 0 0 1 .38.502c.037.119.038.169.038 1.01v.884h-1.83c-1.506-.001-1.831-.006-1.84-.028m4.084.014c-.022-.024-.014-1.682.008-1.799.03-.16.1-.294.215-.422a.73.73 0 0 1 .425-.243c.153-.027 2.194-.028 2.366 0 .291.047.55.3.625.613.02.084.026.297.026.986v.879H9.919c-1.005 0-1.832-.007-1.839-.014m4.075-.014c-.006-.016-.007-.42-.003-.9.005-.775.01-.882.039-.972a.92.92 0 0 1 .427-.518c.147-.077.284-.084 1.472-.077l1.14.006.128.067c.07.037.154.09.188.118.09.076.2.25.246.385.039.117.04.144.041 1.014v.894L14 22.053c-1.547.004-1.836 0-1.844-.023zm4.087.008a39 39 0 0 1 .003-.93l.01-.91.06-.137a.81.81 0 0 1 .592-.483c.075-.014.544-.019 1.261-.015 1.141.007 1.142.007 1.242.053a.9.9 0 0 1 .46.507c.043.116.043.122.043 1.02v.905l-1.832.005c-1.207.004-1.835-.002-1.839-.015m4.087-.9.005-.919.059-.137c.114-.267.335-.458.582-.503.063-.011.572-.02 1.198-.02 1.162 0 1.24.007 1.41.103a1 1 0 0 1 .333.37c.085.193.088.236.082 1.152l-.005.864-1.834.005-1.835.005zm-16.614-1.52c-.15-.291-.466-.527-.749-.56a10 10 0 0 0-.56-.014l-.457-.003-.005-.548c-.006-.594.003-.684.085-.877a.74.74 0 0 1 .263-.338c.205-.15.15-.143 1.413-.151.759-.005 1.173 0 1.253.014.336.063.598.346.659.714.01.064.016.344.014.65l-.005.536-.504.004c-.642.004-.74.028-1.012.253-.105.087-.304.36-.304.416q0 .084-.09-.095zm4.122.068c-.06-.169-.283-.411-.484-.524-.18-.1-.281-.116-.822-.118l-.503-.003v-.59c.002-.495.007-.607.033-.704a.9.9 0 0 1 .302-.457c.214-.162.166-.157 1.412-.164 1.202-.007 1.326 0 1.495.091.204.11.379.36.426.609.011.057.017.328.014.656l-.005.559-.509.004c-.564.005-.647.018-.842.133a1.3 1.3 0 0 0-.415.44.7.7 0 0 1-.073.123c-.005 0-.018-.024-.03-.055zm4.058-.05a1.08 1.08 0 0 0-.595-.535c-.145-.05-.16-.052-.666-.05h-.517v-.595c0-.662.008-.729.118-.918a.77.77 0 0 1 .539-.395c.157-.028 2.168-.03 2.342-.002.308.048.541.266.641.598.035.117.037.167.033.713l-.005.589-.549.01c-.439.01-.566.018-.637.045a1.2 1.2 0 0 0-.587.54.6.6 0 0 1-.055.105.6.6 0 0 1-.061-.106zm4.112.055c-.054-.158-.274-.408-.45-.512-.19-.112-.275-.125-.84-.132l-.511-.006-.005-.559a6 6 0 0 1 .015-.665c.065-.349.321-.618.643-.675.146-.025 2.195-.027 2.355-.001.246.04.47.222.587.48l.063.14.006.644.006.644-.505.001c-.625.002-.691.015-.934.186-.138.097-.26.238-.338.391a1 1 0 0 1-.066.115c-.004 0-.016-.023-.025-.051zm4.052-.065a1.3 1.3 0 0 0-.356-.402c-.216-.156-.233-.159-.86-.172l-.558-.01v-.6c0-.537.004-.611.035-.711.085-.273.243-.454.482-.555.103-.043.128-.044 1.23-.05.735-.004 1.17.001 1.253.016.351.06.616.35.67.735.01.075.016.361.013.649l-.006.515-.457.004a10 10 0 0 0-.559.014c-.3.033-.627.282-.775.59l-.045.095z"/><path d="M1.814 1.115a.51.51 0 0 0-.51.51v6.41c0 2.557.001 4.16.005 5.125.001.483.004.804.007 1.01l.006.23c.001.028.003.049.006.079.002.014.002.03.01.068.004.02.03.1.031.101l.088.137.135.108.25.062c.118 0 .089-.007.119-.012l.1-.015c.305-.054 1.967-.28 2.634-.354a55 55 0 0 1 1.807-.18 79 79 0 0 1 3.127-.201c.567-.024 1.91-.05 2.658-.05a67 67 0 0 1 10.05.763l.188.03.07.011c.021.003-.02.008.102.008l.256-.068.137-.116.056-.084s.022-.043.028-.058c.024-.062.025-.084.03-.106.007-.042.007-.064.009-.09.003-.05.006-.108.008-.195.004-.172.006-.45.008-.904.003-.908.005-2.51.005-5.299v-6.41a.51.51 0 0 0-.51-.51h-.052c-.059 0-.044 0-.063.002l-.072.006-.234.018-.727.058a120 120 0 0 1-6.058.332c-2.498.084-6.394.04-9.012-.101l-.942-.05a116 116 0 0 1-3.115-.222c-.136-.01-.265-.021-.365-.03l-.125-.009c-.033-.002-.03-.004-.094-.004zM21.381 3.01c.001.155.005.273.006.533.003.822.004 2.21.004 4.469v4.967a64 64 0 0 0-1.498-.188l-.412-.05a84 84 0 0 0-2.084-.194 71 71 0 0 0-2.067-.125c-2.894-.138-6.154-.072-8.896.183l-.659.061a77 77 0 0 0-2.518.295l-.11.016V8.01l.001-3.92c.001-.455.004-.802.004-1.078.031.002.024 0 .057.004.335.028.823.066 1.098.084h.002l1.125.07c2.37.15 4.977.217 7.58.197 1.835-.014 3.042-.043 4.603-.115a140 140 0 0 0 3.764-.242" transform="translate(-.27)"/></svg>Theater</button>
                                            <button class="osd-expand-option" data-action="fullscreen"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg>Fullscreen</button>
                                            <button class="osd-expand-option" data-action="exit-fs"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" y1="10" x2="21" y2="3"/><line x1="3" y1="21" x2="10" y2="14"/></svg>Exit Fullscreen</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="video-details">
                            <div class="video-title-row">
                                <h2 id="video-title"></h2>
                                <a id="youtube-link" href="#" target="_blank" rel="noopener" class="youtube-link" title="Watch on YouTube">YouTube</a>
                            </div>
                            <div class="video-info-row">
                                <div class="video-info-left">
                                    <a href="#" id="video-channel" class="channel-link"></a>
                                    <p id="video-meta"></p>
                                </div>
                                <div class="video-info-right">
                                    <button id="favorite-btn" class="player-btn hidden" onclick="toggleFavorite()">â˜† Save</button>
                                    <div id="subtitle-btn-container" class="hidden">
                                        <button id="subtitle-btn" class="player-btn">ðŸ’¬ Off</button>
                                        <div id="subtitle-menu" class="subtitle-menu hidden"></div>
                                    </div>
                                    <div id="summarize-btn-container" class="hidden">
                                        <button id="summarize-btn" class="player-btn">TL;DW</button>
                                        <div id="summarize-menu" class="summarize-menu hidden"></div>
                                    </div>
                                    <div id="audio-btn-container" class="hidden">
                                        <button id="audio-btn" class="player-btn">ðŸ”Š Original</button>
                                        <div id="audio-menu" class="audio-menu hidden"></div>
                                    </div>
                                    <div id="quality-selector" class="quality-selector hidden">
                                        <button id="quality-btn" class="player-btn">ðŸŽ¬ 1080p</button>
                                        <div id="quality-menu" class="quality-menu hidden"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="video-description" class="video-description hidden"></div>
                        </div>
                    </div>

                    <!-- Right column: Queue + Related videos -->
                    <div class="video-sidebar">
                        <div id="queue-section" class="hidden">
                            <div class="queue-header">
                                <div class="queue-toggle-area" id="queue-toggle-area">
                                    <h3 id="queue-title">Queue</h3>
                                    <span id="queue-position"></span>
                                    <span id="queue-hide-indicator" class="queue-arrow">&#9660;</span>
                                </div>
                                <div class="queue-close-area" id="queue-close-area" title="Close queue">
                                    <span>&times;</span>
                                </div>
                            </div>
                            <div id="queue-list" class="queue-list"></div>
                        </div>
                        <h3>Related Videos</h3>
                        <div id="related-videos"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/utilities.js"></script>
    <script src="/static/app.js"></script>
    <script src="/static/search.js"></script>
    <script src="/static/subtitles.js"></script>
    <script src="/static/sponsorblock.js"></script>
    <script src="/static/profiles.js"></script>
    <script src="/static/remote.js"></script>
    <script src="/static/tv-nav.js"></script>
    <script src="/static/tv-overlays.js"></script>
    <script>checkProfile();</script>
</body>
</html>
